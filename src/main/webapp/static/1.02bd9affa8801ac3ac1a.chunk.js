webpackJsonp([1],{520:function(e,t,o){var l=o(187)(o(523),o(524),null,null);l.options.__file="D:\\myworkspace\\spiders\\admin\\src\\views\\taskedit.vue",l.esModule&&Object.keys(l.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),l.options.functional&&console.error("[vue-loader] taskedit.vue: functional components are not supported with templates, they should use render functions."),e.exports=l.exports},522:function(e,t,o){"use strict";function l(e,t,o){return n&&(e=n+e),r.default.http.post(e,t).then(function(e){return e},function(e){return console.error(e),{}})}function a(e,t){return n&&(e=n+e),t&&Object.assign(r.default.http.headers.custom,t.headers),r.default.http.get(e,t).then(function(e){return e},function(e){return console.error(e),{}})}var r=o(49),n="http://127.0.0.1:5000",s=function(e,t){return a("/tasklist/page/"+e,{params:t})},i=function(e){return l("/addtask",JSON.stringify(e))},u=function(e){return a("/deletetask/id/"+e)},c={fetch_task_list:s,updata_save_task:i,delete_task:u};t.a=c},523:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=o(522);t.default={props:["data"],data:function(){var e=this;return{model:{task_name:"",task_cls:"",cron:"",url_items:[],loop_type:1,warnning_lv:1},b_page:"",e_page:"",url:"",urlcol:[{title:"url",key:"url"},{title:"状态",key:"status",render:function(e,t){var o=t.row;return e("Tag",{props:{type:"dot",color:1===o.status?"blue":2===o.status?"green":"red"}},1===o.status?"未抓取":2===o.status?"抓取成功":"抓取失败")}},{title:"抓取时间",key:"address"},{title:"操作",key:"action",align:"center",render:function(t,o){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.show(o.index)}}},"编辑"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.remove(o.index)}}},"删除")])}}],url_items:[],options1:{shortcuts:[{text:"今天",value:function(){return new Date}},{text:"明天",value:function(){var e=new Date;return e.setTime(e.getTime()+864e5),e}},{text:"一周后",value:function(){var e=new Date;return e.setTime(e.getTime()+6048e5),e}}]}}},watch:{data:function(e,t){Object.assign(this.model,e)}},methods:{remove:function(e){this.model.url_items.splice(e,1)},addUrl:function(){if(this.b_page&&this.e_page)for(var e=this.b_page;e<this.e_page;e++)this.model.url_items.push({url:this.url.replace("{page}",e)});else this.model.url_items.push({url:this.url,status:1})},handleSubmit:function(e){var t=this;l.a.updata_save_task(this.model).then(function(e){0==e.body.result?t.$Modal.success({title:"结果",content:"保存成功"}):t.$Modal.error({title:"结果",content:"保存失败"}),t.$emit("close")})},handleReset:function(e){this.model={task_name:"",task_cls:"",cron:"",url_items:[],loop_type:1}}}}},524:function(e,t,o){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Form",{ref:"model",attrs:{model:e.model,"label-width":80}},[o("Form-item",{attrs:{label:"任务名称",prop:"name"}},[o("Input",{attrs:{placeholder:"任务名称"},model:{value:e.model.task_name,callback:function(t){e.model.task_name=t},expression:"model.task_name"}})],1),e._v(" "),o("Form-item",{attrs:{label:"任务Class",prop:"mail"}},[o("Input",{attrs:{placeholder:"任务Class"},model:{value:e.model.task_cls,callback:function(t){e.model.task_cls=t},expression:"model.task_cls"}})],1),e._v(" "),o("Form-item",{attrs:{label:"内容等级",prop:"mail"}},[o("Input-number",{attrs:{max:10,min:1},model:{value:e.model.warnning_lv,callback:function(t){e.model.warnning_lv=t},expression:"model.warnning_lv"}})],1),e._v(" "),o("Form-item",{attrs:{label:"运行类型",prop:"interest"}},[o("Radio-group",{model:{value:e.model.loop_type,callback:function(t){e.model.loop_type=t},expression:"model.loop_type"}},[o("Radio",{attrs:{label:"1"}},[e._v("立即")]),e._v(" "),o("Radio",{attrs:{label:"2"}},[e._v("时间")]),e._v(" "),o("Radio",{attrs:{label:"3"}},[e._v("重复")])],1)],1),e._v(" "),o("Form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.model.loop_type,expression:"model.loop_type == 2"}],attrs:{label:"日期"}},[o("Date-picker",{attrs:{type:"datetime",options:e.options1,placeholder:"选择日期"},model:{value:e.model.exec_time,callback:function(t){e.model.exec_time=t},expression:"model.exec_time"}})],1),e._v(" "),o("Form-item",{directives:[{name:"show",rawName:"v-show",value:3==e.model.loop_type,expression:"model.loop_type == 3"}],attrs:{label:"Cron"}},[o("Input",{attrs:{placeholder:"Cron"},model:{value:e.model.cron,callback:function(t){e.model.cron=t},expression:"model.cron"}})],1),e._v(" "),o("Form-item",{attrs:{label:"url"}},[o("Row",{attrs:{gutter:8}},[o("Col",{attrs:{span:"8"}},[o("Input",{attrs:{placeholder:"url"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1),e._v(" "),o("Col",{attrs:{span:"4"}},[e._v("\n            http://xxxx-{page}")]),e._v(" "),o("Col",{attrs:{span:"7"}},[o("Input",{staticStyle:{width:"40%"},attrs:{placeholder:"开始"},model:{value:e.b_page,callback:function(t){e.b_page=t},expression:"b_page"}}),e._v(" - "),o("Input",{staticStyle:{width:"40%"},attrs:{placeholder:"结束"},model:{value:e.e_page,callback:function(t){e.e_page=t},expression:"e_page"}})],1),e._v(" "),o("Col",{attrs:{span:"4"}},[o("Button",{attrs:{type:"primary"},on:{click:e.addUrl}},[e._v("生成")])],1)],1)],1),e._v(" "),o("Form-item",{attrs:{label:"urls",prop:"desc"}},[o("Table",{attrs:{border:"",columns:e.urlcol,data:e.model.url_items}})],1),e._v(" "),o("Form-item",[o("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("model")}}},[e._v("提交")]),e._v(" "),o("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(t){e.handleReset("model")}}},[e._v("重置")])],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});