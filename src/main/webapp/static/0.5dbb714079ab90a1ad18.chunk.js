webpackJsonp([0,1],{520:function(t,e,a){var o=a(187)(a(523),a(524),null,null);o.options.__file="D:\\myworkspace\\spiders\\admin\\src\\views\\taskedit.vue",o.esModule&&Object.keys(o.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] taskedit.vue: functional components are not supported with templates, they should use render functions."),t.exports=o.exports},521:function(t,e,a){a(526);var o=a(187)(a(525),a(527),"data-v-5dc0d7e8",null);o.options.__file="D:\\myworkspace\\spiders\\admin\\src\\views\\index.vue",o.esModule&&Object.keys(o.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] index.vue: functional components are not supported with templates, they should use render functions."),t.exports=o.exports},522:function(t,e,a){"use strict";function o(t,e,a){return s&&(t=s+t),n.default.http.post(t,e).then(function(t){return t},function(t){return console.error(t),{}})}function r(t,e){return s&&(t=s+t),e&&Object.assign(n.default.http.headers.custom,e.headers),n.default.http.get(t,e).then(function(t){return t},function(t){return console.error(t),{}})}var n=a(49),s="http://127.0.0.1:5000",l=function(t,e){return r("/tasklist/page/"+t,{params:e})},i=function(t){return o("/addtask",JSON.stringify(t))},u=function(t){return r("/deletetask/id/"+t)},c={fetch_task_list:l,updata_save_task:i,delete_task:u};e.a=c},523:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(522);e.default={props:["data"],data:function(){var t=this;return{model:{task_name:"",task_cls:"",cron:"",url_items:[],loop_type:1,warnning_lv:1,host:""},b_page:"",e_page:"",url:"",urlcol:[{title:"url",key:"url"},{title:"状态",key:"status",render:function(t,e){var a=e.row;return t("Tag",{props:{type:"dot",color:1===a.status?"blue":2===a.status?"green":"red"}},1===a.status?"抓取成功":2===a.status?"未抓取":"抓取失败")}},{title:"抓取时间",key:"address"},{title:"操作",key:"action",align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.show(a.index)}}},"编辑"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(a.index)}}},"删除")])}}],url_items:[],options1:{shortcuts:[{text:"今天",value:function(){return new Date}},{text:"明天",value:function(){var t=new Date;return t.setTime(t.getTime()+864e5),t}},{text:"一周后",value:function(){var t=new Date;return t.setTime(t.getTime()+6048e5),t}}]}}},watch:{data:function(t,e){t._id?Object.assign(this.model,t):this.model={task_name:"",task_cls:"",cron:"",url_items:[],loop_type:1,warnning_lv:1,host:""}}},methods:{remove:function(t){this.model.url_items.splice(t,1)},addUrl:function(){if(this.b_page&&this.e_page)for(var t=this.b_page;t<this.e_page;t++)this.model.url_items.push({url:this.url.replace("{page}",t),status:3});else this.url&&this.model.url_items.push({url:this.url,status:0})},handleSubmit:function(t){var e=this;o.a.updata_save_task(this.model).then(function(t){0==t.body.result?e.$Modal.success({title:"结果",content:"保存成功"}):e.$Modal.error({title:"结果",content:"保存失败"}),e.$emit("close")})}}}},524:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Form",{ref:"model",attrs:{model:t.model,"label-width":80}},[a("Form-item",{attrs:{label:"任务名称",prop:"name"}},[a("Row",{attrs:{gutter:8}},[a("Col",{attrs:{span:"10"}},[a("Input",{attrs:{placeholder:"任务名称"},model:{value:t.model.task_name,callback:function(e){t.model.task_name=e},expression:"model.task_name"}})],1),t._v(" "),a("Col",{attrs:{span:"10"}},[a("Input",{attrs:{placeholder:"Host"},model:{value:t.model.host,callback:function(e){t.model.host=e},expression:"model.host"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"任务Class",prop:"mail"}},[a("Input",{attrs:{placeholder:"任务Class"},model:{value:t.model.task_cls,callback:function(e){t.model.task_cls=e},expression:"model.task_cls"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("Form-item",{attrs:{label:"内容等级",prop:"mail"}},[a("Input-number",{attrs:{max:10,min:1},model:{value:t.model.warnning_lv,callback:function(e){t.model.warnning_lv=e},expression:"model.warnning_lv"}})],1)],1)],1),t._v(" "),a("Form-item",{attrs:{label:"运行类型",prop:"interest"}},[a("Radio-group",{model:{value:t.model.loop_type,callback:function(e){t.model.loop_type=e},expression:"model.loop_type"}},[a("Radio",{attrs:{label:"1"}},[t._v("立即")]),t._v(" "),a("Radio",{attrs:{label:"2"}},[t._v("时间")]),t._v(" "),a("Radio",{attrs:{label:"3"}},[t._v("重复")])],1)],1),t._v(" "),a("Form-item",{directives:[{name:"show",rawName:"v-show",value:2==t.model.loop_type,expression:"model.loop_type == 2"}],attrs:{label:"日期"}},[a("Date-picker",{attrs:{type:"datetime",options:t.options1,placeholder:"选择日期"},model:{value:t.model.exec_time,callback:function(e){t.model.exec_time=e},expression:"model.exec_time"}})],1),t._v(" "),a("Form-item",{directives:[{name:"show",rawName:"v-show",value:3==t.model.loop_type,expression:"model.loop_type == 3"}],attrs:{label:"Cron"}},[a("Input",{attrs:{placeholder:"Cron"},model:{value:t.model.cron,callback:function(e){t.model.cron=e},expression:"model.cron"}})],1),t._v(" "),a("Form-item",{attrs:{label:"url"}},[a("Row",{attrs:{gutter:8}},[a("Col",{attrs:{span:"8"}},[a("Input",{attrs:{placeholder:"url"},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],1),t._v(" "),a("Col",{attrs:{span:"4"}},[t._v(" http://xxxx-{page}\n            ")]),t._v(" "),a("Col",{attrs:{span:"7"}},[a("Input",{staticStyle:{width:"40%"},attrs:{placeholder:"开始"},model:{value:t.b_page,callback:function(e){t.b_page=e},expression:"b_page"}}),t._v(" -\n            "),a("Input",{staticStyle:{width:"40%"},attrs:{placeholder:"结束"},model:{value:t.e_page,callback:function(e){t.e_page=e},expression:"e_page"}})],1),t._v(" "),a("Col",{attrs:{span:"4"}},[a("Button",{attrs:{type:"primary"},on:{click:t.addUrl}},[t._v("生成")])],1)],1)],1),t._v(" "),a("Form-item",{attrs:{label:"urls",prop:"desc"}},[a("Table",{attrs:{border:"",columns:t.urlcol,data:t.model.url_items}})],1),t._v(" "),a("Form-item",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("model")}}},[t._v("提交")])],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},525:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(520),r=a.n(o),n=a(522);e.default={components:{TaskEdit:r.a},data:function(){var t=this;return{model:{},total:0,modal1:!1,options1:{shortcuts:[{text:"今天",value:function(){return new Date}},{text:"昨天",value:function(){var t=new Date;return t.setTime(t.getTime()-864e5),t}},{text:"一周前",value:function(){var t=new Date;return t.setTime(t.getTime()-6048e5),t}}]},tableData1:[],tableColumns1:[{title:"序号",key:"index",render:function(t,e){return t("span",e.index+1)}},{title:"任务名称",key:"task_name"},{title:"状态",key:"status",render:function(t,e){var a=e.row;return t("Tag",{props:{type:"dot",color:1===a.status?"blue":2===a.status?"green":"red"}},1===a.status?"抓取中":2===a.status?"抓取完成":"未开始")}},{title:"运行Class",key:"task_cls"},{title:"内容等级",key:"warnning_lv"},{title:"执行周期",key:"loop_type",render:function(t,e){var a=e.row.loop_type,o="";return 1==a?o="立即执行":2==a?o=e.row.exec_time:3==a&&(o=e.row.cron),t("div",o)}},{title:"进度",key:"progress",render:function(t,e){return t("Progress",{props:{percent:0}})}},{title:"更新时间",key:"update"},{title:"操作",key:"update",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.edit(a.index)}}},"编辑"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(a.index)}}},"删除")])}}]}},mounted:function(){this.fetchData(0)},created:function(){},methods:{addTask:function(){this.model={},this.modal1=!0},edit:function(t){this.model=this.tableData1[t],this.modal1=!0},fetchData:function(t){var e=this;n.a.fetch_task_list(t).then(function(t){e.tableData1=t.body.data,e.total=t.body.total})},remove:function(t){n.a.delete_task(this.tableData1[t]._id),this.tableData1.splice(t,1)},changePage:function(t){this.fetchData(t-1)},newtask:function(){this.$router.push("taskedit")}}}},526:function(t,e){},527:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":"1"}},[a("div",{staticClass:"layout-nav"},[a("Menu-item",{attrs:{name:"1"}},[a("Icon",{attrs:{type:"ios-navigate"}}),t._v("\n                爬虫任务\n            ")],1)],1)]),t._v(" "),a("div",{staticClass:"layout-breadcrumb"},[a("Breadcrumb",[a("Breadcrumb-item",{attrs:{href:"#"}},[t._v("首页")]),t._v(" "),a("Breadcrumb-item",{attrs:{href:"#"}},[t._v("爬虫任务")])],1)],1),t._v(" "),a("div",{staticClass:"layout-content"},[a("Card",{attrs:{bordered:!1}},[a("p",{staticStyle:{height:"36px"},slot:"title"},[a("span",[t._v("搜索")]),t._v(" "),a("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.addTask}},[t._v("新增任务")])],1),t._v(" "),a("Form",{ref:"formInline",attrs:{inline:"","label-width":80}},[a("Form-item",{attrs:{label:"任务名称"}},[a("Input",{attrs:{placeholder:"任务名称"}})],1),t._v(" "),a("Form-item",{attrs:{label:"class名称"}},[a("Input",{attrs:{placeholder:"class名称"}})],1),t._v(" "),a("Form-item",{attrs:{label:"运行状态"}},[a("Select",{staticStyle:{width:"200px"}},[a("Option",{attrs:{value:"1"}},[t._v("完成")]),t._v(" "),a("Option",{attrs:{value:"2"}},[t._v("等待执行")]),t._v(" "),a("Option",{attrs:{value:"3"}},[t._v("运行中")]),t._v(" "),a("Option",{attrs:{value:"4"}},[t._v("未执行")])],1)],1),t._v(" "),a("Form-item",{attrs:{label:"运行时间"}},[a("Date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",options:t.options1,placeholder:"选择日期"}})],1),t._v(" "),a("Form-item",[a("Button",{attrs:{type:"primary"}},[t._v("搜索")])],1)],1)],1),t._v(" "),a("Table",{attrs:{data:t.tableData1,columns:t.tableColumns1,stripe:""}}),t._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.total,"page-size":15,current:1},on:{"on-change":t.changePage}})],1)])],1),t._v(" "),a("Modal",{attrs:{title:"新增",width:"900"},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("TaskEdit",{attrs:{data:t.model},on:{close:function(e){t.modal1=!1}}}),t._v(" "),a("div",{slot:"footer"})],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0}});